{% extends 'base.html' %}
{% load static %}
{% block body %}
<h1 class="text-center mt-4 mb-5">All Books</h1>

{% comment %} <div class="">
    <form method="get" action="{% url 'all_books' %}">
        <select name="category">
          <option value="">All Categories</option>
          {% for category in categories %}
            <option value="{{ category.name }}">{{ category.name }}</option>
          {% endfor %}
        </select>
        <button type="submit">Filter</button>
      </form>
</div> {% endcomment %}

<form method="get" action="{% url 'all_books' %}" class="row g-3 d-flex justify-content-center align-items-center my-5">
    <div class="col-auto">
      <label for="category" class="visually-hidden">Category</label>
      <select class="form-select" id="category" name="category">
        <option value="">All Categories</option>
        {% for category in categories %}
          <option value="{{ category.name }}">{{ category.name }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="col-auto">
      <button type="submit" class="btn btn-primary">Filter</button>
    </div>
  </form>

<div class="mx-4 row gap-3">
    {% for book in books %}
        <div class="card col-md-4" style="width: 18rem;">
            <img src="{{book.image.url}}" class="card-img-top" alt="...">
            <div class="card-body">
            <h5 class="card-title">{{book.title}}</h5>
            <p class="card-text">{{book.description|truncatewords:10}}.</p>
            <p class="card-text">Price: ${{book.price}}.</p>
            <a href="{% url "book_detail" pk=book.pk %}" class="btn btn-primary">Details</a>
            </div>
        </div>
    {% endfor %}
</div>
{% endblock  %}

{% comment %} <p>{{book.description|truncatewords:10}}</p> {% endcomment %}